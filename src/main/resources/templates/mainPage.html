<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <!-- Подключаем общий <head> -->
  <th:block th:replace="baza :: links"></th:block>
  <title th:text="${title}">Главная</title>
</head>
<body>

<!-- Меню/шапка -->
<div th:replace="baza :: menu"></div>

<br><br><br>
<!-- Карусель (Bootstrap) -->
<div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
  <ol class="carousel-indicators">
    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
    <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
  </ol>
  <div class="carousel-inner">
    <div class="carousel-item active">
      <img height="700" class="d-block w-100"
           src="https://static1.cbrimages.com/wordpress/wp-content/uploads/2022/01/Steel-Ball-Run.jpg"
           alt="Первый слайд">
    </div>
    <div class="carousel-item">
      <img height="700" class="d-block w-100"
           src="https://staticg.sportskeeda.com/editor/2023/01/edd25-16737314765060-1920.jpg?w=640"
           alt="Второй слайд">
    </div>
    <div class="carousel-item">
      <img height="700" class="d-block w-100"
           src="https://i.ytimg.com/vi/sx5OfnFyvvI/maxresdefault.jpg"
           alt="Третий слайд">
    </div>
  </div>
  <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Предыдущий</span>
  </a>
  <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Следующий</span>
  </a>
</div>

<center>
  <div class="container" style="margin-top:30px;">

    <!-- Рекомендации, если есть -->
    <div th:if="${recommendTitles != null and !#lists.isEmpty(recommendTitles)}">
      <div class="seeAll">
        <div class="topic">Рекомендации</div>
      </div>
      <hr>
      <div class="grid-container">
        <div class="grid-item" th:each="t : ${recommendTitles}">
          <a class="image-con"
             th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
            <img th:src="${t.cover}" class="grid-img item" alt="image">
            <span class="view-count"
                  th:text="${t.amountOfViews} + ' просмотров'">
          </span>
          </a>
          <div class="card_content" th:text="${t.nameOnRussian}"></div>

          <div class="infaPriNavodke">
            <h2 th:text="${t.nameOnRussian}"></h2>
            <p>Год: <b th:text="${t.year}"></b></p>
            <p>Жанры:
              <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
                 th:text="${g} + ' '">
              </b>
            </p>
            <p>Глав:
              <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
            </p>
            <div class="containerz">
              <input id="input-1"
                     name="input-1"
                     class="rating rating-loading"
                     data-min="0" data-max="5" data-step="0.1"
                     th:value="${t.rating != null ? t.rating : 0}">
            </div>
            <p id="description"
               th:text="${(#strings.length(t.description) > 300)
                       ? #strings.substring(t.description,0,300) + '...'
                       : t.description}">
            </p>
          </div>
        </div>
      </div>
      <hr>
    </div>

    <!-- Недавно обновленные -->
    <div th:if="${lastUpdatedTitles != null and !#lists.isEmpty(lastUpdatedTitles)}">
      <div class="seeAll">
        <div class="topic">Недавно были добавлены главы</div>
      </div>
      <hr>
      <div class="grid-container">
        <div class="grid-item" th:each="t : ${lastUpdatedTitles}">
          <a class="image-con"
             th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
            <img th:src="${t.cover}" class="grid-img item" alt="image">
            <span class="view-count"
                  th:text="${t.amountOfViews} + ' просмотров'">
          </span>
          </a>
          <div class="card_content" th:text="${t.nameOnRussian}"></div>

          <div class="infaPriNavodke">
            <h2 th:text="${t.nameOnRussian}"></h2>
            <p>Год: <b th:text="${t.year}"></b></p>
            <p>Жанры:
              <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
                 th:text="${g} + ' '">
              </b>
            </p>
            <p>Глав:
              <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
            </p>
            <div class="containerz">
              <input id="input-1"
                     name="input-1"
                     class="rating rating-loading"
                     data-min="0" data-max="5" data-step="0.1"
                     th:value="${t.rating != null ? t.rating : 0}">
            </div>
            <p id="description"
               th:text="${(#strings.length(t.description) > 300)
                       ? #strings.substring(t.description,0,300) + '...'
                       : t.description}">
            </p>
          </div>
        </div>
      </div>
      <hr>
    </div>

    <!-- Самые популярные -->
    <div th:if="${mostPopular != null and !#lists.isEmpty(mostPopular)}">
      <div class="seeAll">
        <div class="topic">Самые популярные</div>
      </div>
      <hr>
      <div class="grid-container">
        <div class="grid-item" th:each="t : ${mostPopular}">
          <a class="image-con"
             th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
            <img th:src="${t.cover}" class="grid-img item" alt="image">
            <span class="view-count"
                  th:text="${t.amountOfViews} + ' просмотров'">
          </span>
          </a>
          <div class="card_content" th:text="${t.nameOnRussian}"></div>

          <div class="infaPriNavodke">
            <h2 th:text="${t.nameOnRussian}"></h2>
            <p>Год: <b th:text="${t.year}"></b></p>
            <p>Жанры:
              <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
                 th:text="${g} + ' '">
              </b>
            </p>
            <p>Глав:
              <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
            </p>
            <div class="containerz">
              <input id="input-1"
                     name="input-1"
                     class="rating rating-loading"
                     data-min="0" data-max="5" data-step="0.1"
                     th:value="${t.rating != null ? t.rating : 0}">
            </div>
            <p id="description"
               th:text="${(#strings.length(t.description) > 300)
                       ? #strings.substring(t.description,0,300) + '...'
                       : t.description}">
            </p>
          </div>
        </div>
      </div>
      <hr>
    </div>

    <!-- Все Ранобе -->
    <div class="seeAll">
      <div class="topic">Все Ранобе</div>
    </div>
    <hr>
    <div class="grid-container">
      <div class="grid-item"
           th:each="t : ${titles}"
           th:if="${'ранобе'.equals(t.type)}">
        <a class="image-con"
           th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
          <img th:src="${t.cover}" class="grid-img item" alt="image">
          <span class="view-count"
                th:text="${t.amountOfViews} + ' просмотров'">
        </span>
        </a>
        <div class="card_content" th:text="${t.nameOnRussian}"></div>

        <div class="infaPriNavodke">
          <h2 th:text="${t.nameOnRussian}"></h2>
          <p>Год: <b th:text="${t.year}"></b></p>
          <p>Жанры:
            <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
               th:text="${g} + ' '">
            </b>
          </p>
          <p>Глав:
            <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
          </p>
          <div class="containerz">
            <input id="input-1"
                   name="input-1"
                   class="rating rating-loading"
                   data-min="0" data-max="5" data-step="0.1"
                   th:value="${t.rating != null ? t.rating : 0}">
          </div>
          <p id="description"
             th:text="${(#strings.length(t.description) > 300)
                     ? #strings.substring(t.description,0,300) + '...'
                     : t.description}">
          </p>
        </div>
      </div>
    </div>
    <hr>

    <!-- Все аниме -->
    <div class="seeAll">
      <div class="topic">Все Аниме</div>
    </div>
    <hr>
    <div class="grid-container">
      <div class="grid-item"
           th:each="t : ${titles}"
           th:if="${'аниме'.equals(t.type)}">
        <a class="image-con"
           th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
          <img th:src="${t.cover}" class="grid-img item" alt="image">
          <span class="view-count"
                th:text="${t.amountOfViews} + ' просмотров'">
        </span>
        </a>
        <div class="card_content" th:text="${t.nameOnRussian}"></div>

        <div class="infaPriNavodke">
          <h2 th:text="${t.nameOnRussian}"></h2>
          <p>Год: <b th:text="${t.year}"></b></p>
          <p>Жанры:
            <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
               th:text="${g} + ' '">
            </b>
          </p>
          <p>Глав:
            <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
          </p>
          <div class="containerz">
            <input id="input-1"
                   name="input-1"
                   class="rating rating-loading"
                   data-min="0" data-max="5" data-step="0.1"
                   th:value="${t.rating != null ? t.rating : 0}">
          </div>
          <p id="description"
             th:text="${(#strings.length(t.description) > 300)
                     ? #strings.substring(t.description,0,300) + '...'
                     : t.description}">
          </p>
        </div>
      </div>
    </div>
    <hr>

    <!-- Все манги -->
    <div class="seeAll">
      <div class="topic">Все Манги</div>
    </div>
    <hr>
    <div class="grid-container">
      <div class="grid-item"
           th:each="t : ${titles}"
           th:if="${'манга'.equals(t.type)}">
        <a class="image-con"
           th:href="@{/titles/{nazvanie}(nazvanie=${t.nameOnEnglish})}">
          <img th:src="${t.cover}" class="grid-img item" alt="image">
          <span class="view-count"
                th:text="${t.amountOfViews} + ' просмотров'">
        </span>
        </a>
        <div class="card_content" th:text="${t.nameOnRussian}"></div>

        <div class="infaPriNavodke">
          <h2 th:text="${t.nameOnRussian}"></h2>
          <p>Год: <b th:text="${t.year}"></b></p>
          <p>Жанры:
            <b th:each="g : ${#strings.arraySplit(t.genres, ';')}"
               th:text="${g} + ' '">
            </b>
          </p>
          <p>Глав:
            <b th:text="${t.glavaCount != null ? t.glavaCount : 0}"></b>
          </p>
          <div class="containerz">
            <input id="input-1"
                   name="input-1"
                   class="rating rating-loading"
                   data-min="0" data-max="5" data-step="0.1"
                   th:value="${t.rating != null ? t.rating : 0}">
          </div>
          <p id="description"
             th:text="${(#strings.length(t.description) > 300)
                     ? #strings.substring(t.description,0,300) + '...'
                     : t.description}">
          </p>
        </div>
      </div>
    </div>
    <hr>

  </div> <!-- /.container -->
</center>

<!-- Подвал -->
<div th:replace="baza :: footer"></div>
<!-- Скрипты -->
<div th:replace="baza :: scripts"></div>

</body>
</html>
