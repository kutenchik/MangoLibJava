<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
    <!-- Фрагмент: все стили, meta и т.д. -->
    <th:block th:fragment="links">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <title th:text="${title}">Baza Layout</title>

        <!-- Bootstrap + ваши стили -->
        <link rel="stylesheet"
              href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
              integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
              crossorigin="anonymous">
        <link rel="stylesheet" th:href="@{/css/page404.css}">
        <link rel="stylesheet" th:href="@{/css/style.css}">
        <link rel="stylesheet" th:href="@{/css/mainPage.css}">
        <link rel="stylesheet" th:href="@{/css/rating.css}">
        <link rel="icon" th:href="@{/static/uploads/kutenchikLib.jpg}">

        <!-- Пример: FontAwesome / Bootstrap -->
        <link rel="stylesheet"
              href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
        <link rel="stylesheet"
              href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css">
    </th:block>
</head>

<body>

<!-- Фрагмент: меню (header / navbar) -->
<th:block th:fragment="menu">
    <div class="navbar1">
        <a th:href="@{/}">
            <i class="fa fa-home"></i> Главная страница
        </a>

        <a th:href="@{/poisk}">
            Поиск
        </a>

        <!-- Пример рандомной манги -->
        <a th:href="@{/random_manga}">
            Рандом манга
        </a>

        <!-- Если пользователь залогинен (Spring Security) -->
        <sec:authorize access="isAuthenticated()">
            <a th:href="@{/profile}">
                Профиль
            </a>
            <a th:href="@{/logout}">
                Выйти
            </a>
        </sec:authorize>

        <!-- Если НЕ залогинен -->
        <sec:authorize access="!isAuthenticated()">
            <a th:href="@{/login}">
                Авторизоваться
            </a>
        </sec:authorize>
    </div>
</th:block>


<!-- Фрагмент: футер -->
<footer th:fragment="footer" class="yellow-footer">
    <p>© 2025. Ра́йан То́мас Го́слинг (англ. Ryan Thomas Gosling, род. 12 ноября 1980 (1980-11-12), Лондон, Онтарио, Канада) — канадский актёр и музыкант. Известный в независимом кино, он также работал в блокбастерах различных жанров. Получил различные награды, в том числе премию «Золотой глобус», а также номинации на две премии «Оскар», четыре премии Гильдии киноактёров США и премию BAFTA.</p>
</footer>

<!-- Фрагмент: общие скрипты -->
<th:block th:fragment="scripts">
    <script
            src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
            integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            crossorigin="anonymous">
    </script>
    <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7H1bX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous">
    </script>
    <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous">
    </script>
    <script th:src="@{/js/rating.js}"></script>

    <script>
        function setMinContentHeight() {
            const content = document.querySelector('.content1');
            if (!content) return;
            const footerHeight = document.querySelector('footer').offsetHeight;
            content.style.minHeight = `calc(100vh - ${footerHeight}px)`;
        }
        window.addEventListener('load', setMinContentHeight);
        window.addEventListener('resize', setMinContentHeight);
    </script>
</th:block>

</body>
</html>
